class t{constructor(t,e,r,n,i){this.id=t,this.date=e,this.time=r,this.discription=n,this.adress=i}}function e(t,e){let r=t.split("."),n=e.split(".");if(Number(r[0])<Number(n[0]))return-1;if(Number(r[0])>Number(n[0]))return 1;if(Number(r[0])==Number(n[0])){if(Number(r[1])<Number(n[1]))return-1;if(Number(r[1])>Number(n[1]))return 1;if(Number(r[1])==Number(n[1]))return 0}}function r(t,e){let r=t.date.split("-"),n=e.date.split("-");return Number(r[2])<Number(n[2])?-1:Number(r[2])>Number(n[2])?1:Number(r[1])<Number(n[1])?-1:Number(r[1])>Number(n[1])?1:Number(r[0])<Number(n[0])?-1:Number(r[0])>Number(n[0])?1:Number(r[0])==Number(n[0])?0:void 0}function n(t){const e=t.split(".");if(2!=e.length)return!1;const r=Number(e[0]);if(isNaN(r))return!1;if(r<0||r>23)return!1;const n=Number(e[1]);return!isNaN(n)&&!(n<0||n>59)}function i(t){const e=t.split("-");if(3!=e.length)return!1;for(let t=0;t<3;t++)if(isNaN(Number(e[t])))return!1;return!(e[1]>12)&&(!(e[1]=e[0]>28)&&(e[1]=12,!(e[0]>31)&&(e[1]=4,!(e[0]>30))))}document.addEventListener("DOMContentLoaded",(function(){document.getElementById("addButton").onclick=u,document.getElementById("deleteButton").onclick=m,document.getElementById("sortButton").onclick=o,document.getElementById("histButton").onclick=a,document.getElementById("authButton").onclick=auth}));let d=new class{constructor(){this.arr=new Array,this.lastID=0}AddOrder(t){this.arr.push(t),this.lastID++}DeleteOrderById(t){const e=this.arr.findIndex((e=>e.id==t));-1!=e&&this.arr.splice(e,1)}SorByTime(){this.arr.sort(((t,r)=>e(t.time,r.time))),this.arr.sort(r)}};d.AddOrder(new t(d.lastID+1,"17-05-22","9.00","Алые розы 31 шт","Соборный 22")),d.AddOrder(new t(d.lastID+1,"17-05-22","12.30","Желтые тюльпаны 13 шт","Мильчакова 8а")),d.AddOrder(new t(d.lastID+1,"18-05-22","9.00","Тюльпаны желтые и розовые астромерии на 1500","Самовывоз")),d.AddOrder(new t(d.lastID+1,"17-05-22","9.15","Сухоцвет на 1000","Кировский 19")),d.AddOrder(new t(d.lastID+1,"18-05-22","9.15","Розы на выворот, корзина, нежно, 2500","Суворова 21")),d.AddOrder(new t(d.lastID+1,"18-05-22","14.30","Лаванда пучок","Самовывоз")),d.AddOrder(new t(d.lastID+1,"19-05-22","18.30","Свеча девушка торс, лавандовая свеча, пучек лаванды, имбирный пряник","Красноармейская 127 б")),d.AddOrder(new t(d.lastID+1,"18-05-22","18.30","Подсолнухи на 5000","Пушкинская 145")),d.AddOrder(new t(d.lastID+1,"18-05-22","18.30","Имбирный пряник 4, Открытка с днем матери любая, букет на 2500 яркий","Доломановский 12")),c();const s=document.getElementById("myCanvas");s.width=300,s.height=300;let l=new class{constructor(t){this.canvas=t,this.ctx=t.getContext("2d"),this.colors=["#a55ca5","#67b6c7","#bccd7a","#eb9743"],this.padding=20,this.gridScale=1,this.gridColor="#555454"}draw(t){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height);let r=new Array,n=t.keys();for(let e=0;e<t.size;e++)r.push(n.next().value);r=r.sort(e);let i=0;for(let e of t.values())i=Math.max(i,e);let d=this.canvas.height-2*this.padding,s=this.canvas.width-2*this.padding,l=0;for(;l<=i;){let t=d*(1-l/i)+this.padding;a=this.ctx,o=0,c=t,u=this.canvas.width,m=t,h=this.gridColor,a.save(),a.strokeStyle=h,a.beginPath(),a.moveTo(o,c),a.lineTo(u,m),a.stroke(),a.restore(),this.ctx.save(),this.ctx.fillStyle=this.gridColor,this.ctx.textBaseline="bottom",this.ctx.font="bold 10px Arial",this.ctx.fillText(l,10,t-2),this.ctx.restore(),l+=this.gridScale}var a,o,c,u,m,h;let f=0,b=s/t.size;const g=Math.round(d/i);r.forEach((e=>{let r=g*t.get(e);!function(t,e,r,n,i,d){t.save(),t.fillStyle=d,t.fillRect(e,r,n,i),t.restore()}(this.ctx,this.padding+f*b,this.canvas.height-r-this.padding,b,r,this.colors[f%this.colors.length]),f++})),f=0;let p=d+this.padding+15,N=this.padding+2;r.forEach((t=>{this.ctx.fillText(t,N,p),f++,N+=b}))}}(s);function a(){l.draw(function(){let t=new Map;for(let e=0;e<d.arr.length;e++){let r=d.arr[e].time;t.has(r)?t.set(r,t.get(r)+1):t.set(r,1)}return t}())}function o(){d.SorByTime(),c()}function c(){document.querySelector("tbody").remove();const t=document.createElement("tbody");document.getElementById("table").appendChild(t),d.arr.forEach((e=>{let r=function(t){let e=document.createElement("tr"),r=document.createElement("td");r.innerHTML=t.id,e.appendChild(r);let n=document.createElement("td");n.innerHTML=t.date,e.appendChild(n);let i=document.createElement("td");i.innerHTML=t.time,e.appendChild(i);let d=document.createElement("td");d.innerHTML=t.discription,e.appendChild(d);let s=document.createElement("td");return s.innerHTML=t.adress,e.appendChild(s),e}(e);t.appendChild(r)}))}function u(){let e=1;i(document.getElementById("data").value)||(alert("Wrong Date!!!"),e=0);const r=document.getElementById("time").value;n(r)||(alert("Wrong Time!!!"),e=0);document.getElementById("description").value,document.getElementById("address").value;let s=new t(d.lastID+1,"17-05-22",r,"Белые розы 31 шт","Соборный 22");e&&d.AddOrder(s),c()}function m(){const t=Number(document.getElementById("deleteId").value);d.DeleteOrderById(t),c()}